<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xl="http://www.w3.org/1999/xlink" version="1.1" viewBox="0 0 810 563" width="810pt" height="563pt" xmlns:dc="http://purl.org/dc/elements/1.1/"><metadata> Produced by OmniGraffle 6.5 <dc:date>2016-03-17 01:32:20 +0000</dc:date></metadata><defs><filter id="Shadow" filterUnits="userSpaceOnUse"><feGaussianBlur in="SourceAlpha" result="blur" stdDeviation="1.308"/><feOffset in="blur" result="offset" dx="0" dy="2"/><feFlood flood-color="black" flood-opacity=".5" result="flood"/><feComposite in="flood" in2="offset" operator="in"/></filter><linearGradient x1="0" x2="1" id="Gradient" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="white"/><stop offset="1" stop-color="black"/></linearGradient><linearGradient id="Obj_Gradient" xl:href="#Gradient" gradientTransform="translate(234 36) rotate(90) scale(27)"/><font-face font-family="Helvetica" font-size="12" units-per-em="1000" underline-position="-75.683594" underline-thickness="49.316406" slope="0" x-height="522.94922" cap-height="717.28516" ascent="770.01953" descent="-229.98047" font-weight="500"><font-face-src><font-face-name name="Helvetica"/></font-face-src></font-face><linearGradient id="Obj_Gradient_2" xl:href="#Gradient" gradientTransform="translate(234 90) rotate(90) scale(27)"/><linearGradient id="Obj_Gradient_3" xl:href="#Gradient" gradientTransform="translate(90 153) rotate(90) scale(27)"/><linearGradient id="Obj_Gradient_4" xl:href="#Gradient" gradientTransform="translate(351 153) rotate(90) scale(27)"/><linearGradient id="Obj_Gradient_5" xl:href="#Gradient" gradientTransform="translate(351 198) rotate(90) scale(27)"/><linearGradient id="Obj_Gradient_6" xl:href="#Gradient" gradientTransform="translate(351 252) rotate(90) scale(27)"/><linearGradient id="Obj_Gradient_7" xl:href="#Gradient" gradientTransform="translate(616.5 153) rotate(90) scale(27)"/><font-face font-family="Helvetica Neue" font-size="14" panose-1="2 0 8 3 0 0 0 9 0 4" units-per-em="1000" underline-position="-100" underline-thickness="50" slope="0" x-height="517" cap-height="714" ascent="975.0061" descent="-216.99524" font-weight="bold"><font-face-src><font-face-name name="HelveticaNeue-Bold"/></font-face-src></font-face><font-face font-family="Helvetica Neue" font-size="14" panose-1="2 0 5 3 0 0 0 2 0 4" units-per-em="1000" underline-position="-100" underline-thickness="50" slope="0" x-height="517" cap-height="714" ascent="951.99585" descent="-212.99744" font-weight="500"><font-face-src><font-face-name name="HelveticaNeue"/></font-face-src></font-face><font-face font-family="Heiti SC" font-size="12" panose-1="2 0 0 0 0 0 0 0 0 0" units-per-em="1000" underline-position="-133" underline-thickness="20" slope="0" x-height="591" cap-height="778" ascent="860.0006" descent="-139.99939" font-weight="300"><font-face-src><font-face-name name="STHeitiSC-Light"/></font-face-src></font-face></defs><g stroke="none" stroke-opacity="1" stroke-dasharray="none" fill="none" fill-opacity="1"><title>dm_framework</title><rect fill="white" width="815" height="655"/><g><title>Layer 1</title><g><xl:use xl:href="#id44_Graphic" filter="url(#Shadow)"/><xl:use xl:href="#id309_Graphic" filter="url(#Shadow)"/><xl:use xl:href="#id310_Graphic" filter="url(#Shadow)"/><xl:use xl:href="#id311_Graphic" filter="url(#Shadow)"/><xl:use xl:href="#id312_Graphic" filter="url(#Shadow)"/><xl:use xl:href="#id313_Graphic" filter="url(#Shadow)"/><xl:use xl:href="#id42_Graphic" filter="url(#Shadow)"/></g><rect x="162" y="36" width="144" height="27" fill="url(#Obj_Gradient)"/><rect x="162" y="36" width="144" height="27" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text transform="translate(167 42.5)" fill="black"><tspan font-family="Helvetica" font-size="12" font-weight="500" x="24.636719" y="11" textLength="84.72656">mapped_device</tspan></text><rect x="162" y="90" width="144" height="27" fill="url(#Obj_Gradient_2)"/><rect x="162" y="90" width="144" height="27" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text transform="translate(167 96.5)" fill="black"><tspan font-family="Helvetica" font-size="12" font-weight="500" x="46.319336" y="11" textLength="41.361328">gendisk</tspan></text><rect x="18" y="153" width="144" height="27" fill="url(#Obj_Gradient_3)"/><rect x="18" y="153" width="144" height="27" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text transform="translate(23 159.5)" fill="black"><tspan font-family="Helvetica" font-size="12" font-weight="500" x=".9560547" y="11" textLength="132.08789">block_device_operations</tspan></text><rect x="279" y="153" width="144" height="27" fill="url(#Obj_Gradient_4)"/><rect x="279" y="153" width="144" height="27" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text transform="translate(284 159.5)" fill="black"><tspan font-family="Helvetica" font-size="12" font-weight="500" x="26.96582" y="11" textLength="80.06836">request_queue</tspan></text><rect x="279" y="198" width="144" height="27" fill="url(#Obj_Gradient_5)"/><rect x="279" y="198" width="144" height="27" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text transform="translate(284 204.5)" fill="black"><tspan font-family="Helvetica" font-size="12" font-weight="500" x="46.987305" y="11" textLength="40.02539">request</tspan></text><rect x="279" y="252" width="144" height="27" fill="url(#Obj_Gradient_6)"/><rect x="279" y="252" width="144" height="27" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text transform="translate(284 258.5)" fill="black"><tspan font-family="Helvetica" font-size="12" font-weight="500" x="58.993164" y="11" textLength="16.013672">bio</tspan></text><rect x="504" y="153" width="225" height="27" fill="url(#Obj_Gradient_7)"/><rect x="504" y="153" width="225" height="27" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text transform="translate(509 159.5)" fill="black"><tspan font-family="Helvetica" font-size="12" font-weight="500" x="22.615234" y="11" textLength="169.76953">make_request_fn = dm_request</tspan></text><text transform="translate(27 297)" fill="black"><tspan font-family="Helvetica Neue" font-size="14" font-weight="bold" x="0" y="14" textLength="105.21">dm framework: </tspan><tspan font-family="Helvetica Neue" font-size="14" font-weight="500" x="0" y="30" textLength="31.906">dm_r</tspan><tspan font-family="Helvetica Neue" font-size="14" font-weight="500" x="31.654" y="30" textLength="99.176">equest -&gt;_dm_r</tspan><tspan font-family="Helvetica Neue" font-size="14" font-weight="500" x="130.578" y="30" textLength="151.55">equest -&gt;  _split_and_pr</tspan><tspan font-family="Helvetica Neue" font-size="14" font-weight="500" x="281.876" y="30" textLength="304.752">ocess_bio -&gt; _clone_and_map-&gt;_map_bio -&gt; tar</tspan><tspan font-family="Helvetica Neue" font-size="14" font-weight="500" x="586.236" y="30" textLength="85.848">get_type.map</tspan><tspan font-family="Helvetica Neue" font-size="14" font-weight="bold" x="0" y="63" textLength="50.554">thin_tar</tspan><tspan font-family="Helvetica Neue" font-size="14" font-weight="bold" x="50.162" y="63" textLength="25.41">get:</tspan><tspan font-family="Helvetica Neue" font-size="14" font-weight="500" x="75.572" y="63" textLength="3.892"> </tspan><tspan font-family="Helvetica Neue" font-size="14" font-weight="500" x="0" y="79" textLength="382.606">thin_map -&gt;thin_bio_map -&gt; wake_worker -&gt;do_worker -&gt; pr</tspan><tspan font-family="Helvetica Neue" font-size="14" font-weight="500" x="382.354" y="79" textLength="80.878">ocess_deferr</tspan><tspan font-family="Helvetica Neue" font-size="14" font-weight="500" x="462.98" y="79" textLength="83.86">ed_bios -&gt; pr</tspan><tspan font-family="Helvetica Neue" font-size="14" font-weight="500" x="546.588" y="79" textLength="110.964">ocess_thin_deferr</tspan><tspan font-family="Helvetica Neue" font-size="14" font-weight="500" x="657.3" y="79" textLength="53.158">ed_bios </tspan><tspan font-family="Helvetica Neue" font-size="14" font-weight="500" x="0" y="95" textLength="62.076">-&gt; pool.pr</tspan><tspan font-family="Helvetica Neue" font-size="14" font-weight="500" x="61.824" y="95" textLength="82.446">ocess_bio_fn</tspan><tspan font-family="Helvetica Neue" font-size="14" font-weight="500" x="0" y="111" textLength="30.702">-&gt; pr</tspan><tspan font-family="Helvetica Neue" font-size="14" font-weight="500" x="30.45" y="111" textLength="98.112">ocess_bio -&gt; pr</tspan><tspan font-family="Helvetica Neue" font-size="14" font-weight="500" x="128.31" y="111" textLength="71.036">ocess_shar</tspan><tspan font-family="Helvetica Neue" font-size="14" font-weight="500" x="199.094" y="111" textLength="76.86">ed_bio -&gt; br</tspan><tspan font-family="Helvetica Neue" font-size="14" font-weight="500" x="275.702" y="111" textLength="187.838">eak_sharing -&gt; schedule_inter</tspan><tspan font-family="Helvetica Neue" font-size="14" font-weight="500" x="463.792" y="111" textLength="172.284">nal_copy -&gt; schedule_copy</tspan><tspan font-family="Helvetica Neue" font-size="14" font-weight="500" x="0" y="127" textLength="13.846">-&gt;</tspan><tspan font-family="Helvetica Neue" font-size="14" font-weight="500" x="0" y="143" textLength="497.434">1)overwrite_endio -&gt;_maybe_add_mapping -&gt; wake_worker -&gt; do_worker -&gt; pr</tspan><tspan font-family="Helvetica Neue" font-size="14" font-weight="500" x="497.182" y="143" textLength="57.036">ocess_pr</tspan><tspan font-family="Helvetica Neue" font-size="14" font-weight="500" x="553.966" y="143" textLength="28">epar</tspan><tspan font-family="Helvetica Neue" font-size="14" font-weight="500" x="581.714" y="143" textLength="19.712">ed </tspan><tspan font-family="Helvetica Neue" font-size="14" font-weight="500" x="0" y="159" textLength="498.26">2)copy_complete  -&gt;_maybe_add_mapping -&gt; wake_worker -&gt; do_worker -&gt; pr</tspan><tspan font-family="Helvetica Neue" font-size="14" font-weight="500" x="498.008" y="159" textLength="57.036">ocess_pr</tspan><tspan font-family="Helvetica Neue" font-size="14" font-weight="500" x="554.792" y="159" textLength="28">epar</tspan><tspan font-family="Helvetica Neue" font-size="14" font-weight="500" x="582.54" y="159" textLength="15.82">ed</tspan><tspan font-family="Helvetica Neue" font-size="14" font-weight="500" x="0" y="175" textLength="62.076">-&gt; pool.pr</tspan><tspan font-family="Helvetica Neue" font-size="14" font-weight="500" x="61.824" y="175" textLength="57.036">ocess_pr</tspan><tspan font-family="Helvetica Neue" font-size="14" font-weight="500" x="118.608" y="175" textLength="28">epar</tspan><tspan font-family="Helvetica Neue" font-size="14" font-weight="500" x="146.356" y="175" textLength="157.682">ed_mapping_fn &amp; pool.pr</tspan><tspan font-family="Helvetica Neue" font-size="14" font-weight="500" x="303.786" y="175" textLength="57.036">ocess_pr</tspan><tspan font-family="Helvetica Neue" font-size="14" font-weight="500" x="360.57" y="175" textLength="28">epar</tspan><tspan font-family="Helvetica Neue" font-size="14" font-weight="500" x="388.318" y="175" textLength="60.928">ed_discar</tspan><tspan font-family="Helvetica Neue" font-size="14" font-weight="500" x="448.994" y="175" textLength="27.23">d_fn</tspan><tspan font-family="Helvetica Neue" font-size="14" font-weight="500" x="0" y="191" textLength="30.702">-&gt; pr</tspan><tspan font-family="Helvetica Neue" font-size="14" font-weight="500" x="30.45" y="191" textLength="57.036">ocess_pr</tspan><tspan font-family="Helvetica Neue" font-size="14" font-weight="500" x="87.234" y="191" textLength="28">epar</tspan><tspan font-family="Helvetica Neue" font-size="14" font-weight="500" x="114.982" y="191" textLength="232.484">ed_mapping -&gt; dm_thin_insert_block</tspan></text><g id="id44_Graphic"><path d="M 234 63 L 234.42578 76.421875 L 234 90" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/></g><g id="id309_Graphic"><path d="M 234 117 L 234 126 L 234 135" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/></g><g id="id310_Graphic"><path d="M 351 180 L 351.42578 184.42188 L 351 198" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/></g><g id="id311_Graphic"><path d="M 351 225 L 351 252 L 351 252" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/></g><g id="id312_Graphic"><path d="M 234 135 L 90 135 L 90 153" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/></g><g id="id313_Graphic"><path d="M 234 135 L 351 135 L 351 153" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/></g><g id="id42_Graphic"><path d="M 423 171 L 459 171 L 504 171" stroke="#666" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" stroke-dasharray="1,3"/></g><text transform="translate(369 9)" fill="black"><tspan font-family="Heiti SC" font-size="12" font-weight="300" x="0" y="38" textLength="248.604">mkfs  /dev/mapper/docker:8:1-11111-base</tspan><tspan font-family="Heiti SC" font-size="12" font-weight="300" x="0" y="50" textLength="343.488">mount /dev/mappder/docker:8:1-11111-{uuid}  /mnt/{uuid}</tspan><tspan font-family="Heiti SC" font-size="12" font-weight="300" x="0" y="74" textLength="153.744">IO   bio—&gt;thin_target.map</tspan><tspan font-family="Heiti SC" font-size="12" font-weight="300" x="0" y="86" textLength="138.348">mkdir /mnt/{uuid}/rootfs</tspan><tspan font-family="Heiti SC" font-size="12" font-weight="300" x="0" y="98" textLength="172.272">mkdir /mnt/{uuid}/rootfs/data</tspan><tspan font-family="Heiti SC" font-size="12" font-weight="300" x="0" y="110" textLength="201.684">write/read /mnt/{uuid}/rootfs/data</tspan></text></g></g></svg>
